---
import StarlightBlog from "starlight-blog/overrides/MarkdownContent.astro";
import StarlightImageZoom from "starlight-image-zoom/components/ImageZoom.astro";
import Comments from "starlight-giscus/components/Comments.astro";
---

<StarlightImageZoom />
<StarlightBlog>
  <slot />
  <div class="comments">
    <Comments />
  </div>
</StarlightBlog>

<script>
  // Shortly highlight fragments to find faster on page
  window.addEventListener("DOMContentLoaded", () => {
    const hash = window.location.hash;
    if (hash) {
      const target = document.querySelector(hash);
      if (target) {
        if (target.classList.contains("fragment-highlight")) {
          target.classList.add("highlight-now");
          setTimeout(() => {
            target.classList.remove("highlight-now");
          }, 4000); // Duration matches CSS animation
        }
      }
    }
  });
</script>

<style>
  .comments {
    margin-top: 2rem;
  }
</style>
